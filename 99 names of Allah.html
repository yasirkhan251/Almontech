<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Asma-ul-Husna â€” 99 Names of Allah (with Voice)</title>
  <style>
    :root{
      --bg:#0b0f14; --card:#121821; --muted:#9db0c3; --accent:#2bd4bd; --ring:#2bd4bd55; --text:#e9f1f7;
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1200px 800px at 20% -10%, #12202d 0, transparent 60%),linear-gradient(180deg,#0b0f14,#0a0e13);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
    header{position:sticky;top:0;backdrop-filter:saturate(1.2) blur(6px);background:#0b0f14cc;border-bottom:1px solid #1c2633}
    .wrap{max-width:1100px;margin-inline:auto;padding:16px}
    h1{margin:8px 0 12px;font-size:clamp(22px,3vw,30px)}
    p.lead{margin:0 0 14px;color:var(--muted)}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    input[type="search"]{flex:1;min-width:240px;background:#0e141c;border:1px solid #1f2937;border-radius:12px;padding:12px 14px;color:var(--text);outline:none}
    input[type="search"]:focus{border-color:var(--accent);box-shadow:0 0 0 4px var(--ring)}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px;margin-top:16px}
    .card{background:linear-gradient(180deg,#121821,#0e141c);border:1px solid #1a2330;border-radius:16px;padding:14px;box-shadow:0 8px 24px rgba(0,0,0,.25);display:flex;flex-direction:column;gap:8px}
    .arabic{font-family:"Amiri","Scheherazade New",serif;font-size:28px;direction:rtl;text-align:right;letter-spacing:.5px}
    .roman{color:#cfe6ff;font-weight:600}
    .meaning{color:var(--muted);font-size:14px}
    .meta{display:flex;justify-content:space-between;align-items:center;color:#9fb1c2;font-size:12px}
    .btns{display:flex;gap:8px;flex-wrap:wrap}
    button{appearance:none;border:1px solid #1f2a37;background:#0f1520;color:var(--text);padding:8px 10px;border-radius:12px;cursor:pointer;font-weight:600}
    button:hover{border-color:#2bd4bd99;color:#d6fffa}
    .muteNote{font-size:12px;color:#7f93a8;margin-top:8px}
    .footer{color:#7f93a8;font-size:12px;padding:16px 0 28px}
    .count{font-variant-numeric:tabular-nums}
    .badge{display:inline-flex;align-items:center;gap:6px;border:1px solid #1b2635;border-radius:999px;padding:6px 10px;color:#a9c2d9;background:#0c131b}
    .topRow{display:flex;justify-content:space-between;gap:10px;align-items:center}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .pill{border:1px solid #203044;background:#0c141f;color:#b9d6ef;padding:4px 8px;border-radius:999px;font-size:12px}
    @media (prefers-reduced-motion:no-preference){
      .card{transition:transform .2s ease, border-color .2s ease}
      .card:hover{transform:translateY(-2px);border-color:#2bd4bd40}
    }
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <div class="wrap">
      <div class="topRow">
        <div>
          <h1>Asma-ul-Husna â€” The 99 Names of Allah ï·»</h1>
          <p class="lead">Click to hear the Arabic, transliteration, or meaning. Use search to filter.</p>
        </div>
        <div class="pill count"><span id="visibleCount">99</span> of <span id="totalCount">99</span></div>
      </div>
      <div class="toolbar">
        <label class="sr-only" for="q">Search names</label>
        <input id="q" type="search" placeholder="Search (Arabic / transliteration / meaning)â€¦ e.g. Ø±Ø­Ù…Ù† , Rahman , Merciful" />
        <button id="speakAll">Play All (Arabic)</button>
        <button id="stopAll">Stop</button>
      </div>
      <div class="muteNote">Tip: On mobile, ensure your device isn't on silent. In browser settings, choose an Arabic voice if available for clearer pronunciation.</div>
    </div>
  </header>

  <main class="wrap">
    <div id="grid" class="grid" role="list" aria-label="Asma-ul-Husna list"></div>
    <div class="footer">Note: Meanings are concise renderings used for remembrance. Nuances vary across translations.</div>
  </main>

<script>
// -------- Data: 99 Names (Arabic, Transliteration, Meaning) --------
const NAMES = [
  {n:1, ar:"Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†", tr:"Ar-Raá¸¥mÄn", en:"The Entirely Merciful"},
  {n:2, ar:"Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…", tr:"Ar-Raá¸¥Ä«m", en:"The Especially Merciful"},
  {n:3, ar:"Ù±Ù„Ù’Ù…ÙÙ„ÙÙƒ", tr:"Al-Malik", en:"The Sovereign"},
  {n:4, ar:"Ù±Ù„Ù’Ù‚ÙØ¯ÙÙ‘ÙˆØ³", tr:"Al-QuddÅ«s", en:"The Most Holy"},
  {n:5, ar:"Ù±Ù„Ø³ÙÙ‘Ù„ÙØ§Ù…", tr:"As-SalÄm", en:"The Source of Peace"},
  {n:6, ar:"Ù±Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†", tr:"Al-MuÊ¾min", en:"The Giver of Security"},
  {n:7, ar:"Ù±Ù„Ù’Ù…ÙÙ‡ÙÙŠÙ’Ù…ÙÙ†", tr:"Al-Muhaymin", en:"The Guardian / Protector"},
  {n:8, ar:"Ù±Ù„Ù’Ø¹ÙØ²ÙÙŠØ²", tr:"Al-Ê¿AzÄ«z", en:"The Almighty"},
  {n:9, ar:"Ù±Ù„Ù’Ø¬ÙØ¨ÙÙ‘Ø§Ø±", tr:"Al-JabbÄr", en:"The Compeller"},
  {n:10, ar:"Ù±Ù„Ù’Ù…ÙØªÙÙƒÙØ¨ÙÙ‘Ø±", tr:"Al-Mutakabbir", en:"The Supremely Great"},
  {n:11, ar:"Ù±Ù„Ù’Ø®ÙØ§Ù„ÙÙ‚", tr:"Al-KhÄliq", en:"The Creator"},
  {n:12, ar:"Ù±Ù„Ù’Ø¨ÙØ§Ø±ÙØ¦", tr:"Al-BÄriÊ¾", en:"The Originator"},
  {n:13, ar:"Ù±Ù„Ù’Ù…ÙØµÙÙˆÙÙ‘Ø±", tr:"Al-Muá¹£awwir", en:"The Fashioner"},
  {n:14, ar:"Ù±Ù„Ù’ØºÙÙÙÙ‘Ø§Ø±", tr:"Al-GhaffÄr", en:"The All-Forgiving"},
  {n:15, ar:"Ù±Ù„Ù’Ù‚ÙÙ‡ÙÙ‘Ø§Ø±", tr:"Al-QahhÄr", en:"The All-Subduer"},
  {n:16, ar:"Ù±Ù„Ù’ÙˆÙÙ‡ÙÙ‘Ø§Ø¨", tr:"Al-WahhÄb", en:"The Supreme Bestower"},
  {n:17, ar:"Ù±Ù„Ø±ÙÙ‘Ø²ÙÙ‘Ø§Ù‚", tr:"Ar-RazzÄq", en:"The Provider"},
  {n:18, ar:"Ù±Ù„Ù’ÙÙØªÙÙ‘Ø§Ø­", tr:"Al-FattÄá¸¥", en:"The Opener / Judge"},
  {n:19, ar:"Ù±Ù„Ù’Ø¹ÙÙ„ÙÙŠÙ…", tr:"Al-Ê¿AlÄ«m", en:"The All-Knowing"},
  {n:20, ar:"Ù±Ù„Ù’Ù‚ÙØ§Ø¨ÙØ¶", tr:"Al-QÄbiá¸", en:"The Withholder"},
  {n:21, ar:"Ù±Ù„Ù’Ø¨ÙØ§Ø³ÙØ·", tr:"Al-BÄsiá¹­", en:"The Extender"},
  {n:22, ar:"Ù±Ù„Ù’Ø®ÙØ§ÙÙØ¶", tr:"Al-KhÄfiá¸", en:"The Reducer"},
  {n:23, ar:"Ù±Ù„Ø±ÙÙ‘Ø§ÙÙØ¹", tr:"Ar-RÄfiÊ¿", en:"The Exalter"},
  {n:24, ar:"Ù±Ù„Ù’Ù…ÙØ¹ÙØ²Ù‘", tr:"Al-MuÊ¿izz", en:"The Honourer / Bestower"},
  {n:25, ar:"Ù±Ù„Ù’Ù…ÙØ°ÙÙ„Ù‘", tr:"Al-Mudhill", en:"The Humiliator"},
  {n:26, ar:"Ù±Ù„Ø³ÙÙ‘Ù…ÙÙŠØ¹", tr:"As-SamÄ«Ê¿", en:"The All-Hearing"},
  {n:27, ar:"Ù±Ù„Ù’Ø¨ÙØµÙÙŠØ±", tr:"Al-Baá¹£Ä«r", en:"The All-Seeing"},
  {n:28, ar:"Ù±Ù„Ù’Ø­ÙÙƒÙÙ…", tr:"Al-á¸¤akam", en:"The Impartial Judge"},
  {n:29, ar:"Ù±Ù„Ù’Ø¹ÙØ¯Ù’Ù„", tr:"Al-Ê¿Adl", en:"The Utterly Just"},
  {n:30, ar:"Ù±Ù„Ù„ÙÙ‘Ø·ÙÙŠÙ", tr:"Al-Laá¹­Ä«f", en:"The Subtle / Most Gentle"},
  {n:31, ar:"Ù±Ù„Ù’Ø®ÙØ¨ÙÙŠØ±", tr:"Al-KhabÄ«r", en:"The All-Aware"},
  {n:32, ar:"Ù±Ù„Ù’Ø­ÙÙ„ÙÙŠÙ…", tr:"Al-á¸¤alÄ«m", en:"The Most Forbearing"},
  {n:33, ar:"Ù±Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…", tr:"Al-Ê¿Aáº“Ä«m", en:"The Magnificent"},
  {n:34, ar:"Ù±Ù„Ù’ØºÙÙÙÙˆØ±", tr:"Al-GhafÅ«r", en:"The All-Forgiving"},
  {n:35, ar:"Ù±Ù„Ø´ÙÙ‘ÙƒÙÙˆØ±", tr:"Ash-ShakÅ«r", en:"The Most Appreciative"},
  {n:36, ar:"Ù±Ù„Ù’Ø¹ÙÙ„ÙÙŠÙ‘", tr:"Al-Ê¿Aliyy", en:"The Most High"},
  {n:37, ar:"Ù±Ù„Ù’ÙƒÙØ¨ÙÙŠØ±", tr:"Al-KabÄ«r", en:"The Most Great"},
  {n:38, ar:"Ù±Ù„Ù’Ø­ÙÙÙÙŠØ¸", tr:"Al-á¸¤afÄ«áº“", en:"The Preserver"},
  {n:39, ar:"Ù±Ù„Ù’Ù…ÙÙ‚ÙÙŠØª", tr:"Al-MuqÄ«t", en:"The Sustainer"},
  {n:40, ar:"Ù±Ù„Ù’Ø­ÙØ³ÙÙŠØ¨", tr:"Al-á¸¤asÄ«b", en:"The Reckoner"},
  {n:41, ar:"Ù±Ù„Ù’Ø¬ÙÙ„ÙÙŠÙ„", tr:"Al-JalÄ«l", en:"The Majestic"},
  {n:42, ar:"Ù±Ù„Ù’ÙƒÙØ±ÙÙŠÙ…", tr:"Al-KarÄ«m", en:"The Most Generous"},
  {n:43, ar:"Ù±Ù„Ø±ÙÙ‘Ù‚ÙÙŠØ¨", tr:"Ar-RaqÄ«b", en:"The Watchful"},
  {n:44, ar:"Ù±Ù„Ù’Ù…ÙØ¬ÙÙŠØ¨", tr:"Al-MujÄ«b", en:"The Responder"},
  {n:45, ar:"Ù±Ù„Ù’ÙˆÙØ§Ø³ÙØ¹", tr:"Al-WÄsiÊ¿", en:"The All-Encompassing"},
  {n:46, ar:"Ù±Ù„Ù’Ø­ÙÙƒÙÙŠÙ…", tr:"Al-á¸¤akÄ«m", en:"The All-Wise"},
  {n:47, ar:"Ù±Ù„Ù’ÙˆÙØ¯ÙÙˆØ¯", tr:"Al-WadÅ«d", en:"The Most Loving"},
  {n:48, ar:"Ù±Ù„Ù’Ù…ÙØ¬ÙÙŠØ¯", tr:"Al-MajÄ«d", en:"The Glorious / Most Honorable"},
  {n:49, ar:"Ù±Ù„Ù’Ø¨ÙØ§Ø¹ÙØ«", tr:"Al-BÄÊ¿ith", en:"The Resurrector"},
  {n:50, ar:"Ù±Ù„Ø´ÙÙ‘Ù‡ÙÙŠØ¯", tr:"Ash-ShahÄ«d", en:"The All-and-Ever Witnessing"},
  {n:51, ar:"Ù±Ù„Ù’Ø­ÙÙ‚Ù‘", tr:"Al-á¸¤aqq", en:"The Absolute Truth"},
  {n:52, ar:"Ù±Ù„Ù’ÙˆÙÙƒÙÙŠÙ„", tr:"Al-WakÄ«l", en:"The Trustee / Disposer of Affairs"},
  {n:53, ar:"Ù±Ù„Ù’Ù‚ÙÙˆÙÙŠÙ‘", tr:"Al-Qawiyy", en:"The All-Strong"},
  {n:54, ar:"Ù±Ù„Ù’Ù…ÙØªÙÙŠÙ†", tr:"Al-MatÄ«n", en:"The Firm / Steadfast"},
  {n:55, ar:"Ù±Ù„Ù’ÙˆÙÙ„ÙÙŠÙ‘", tr:"Al-Waliyy", en:"The Protecting Guardian"},
  {n:56, ar:"Ù±Ù„Ù’Ø­ÙÙ…ÙÙŠØ¯", tr:"Al-á¸¤amÄ«d", en:"The Praiseworthy"},
  {n:57, ar:"Ù±Ù„Ù’Ù…ÙØ­Ù’ØµÙÙŠ", tr:"Al-Muá¸¥á¹£Ä«", en:"The All-Enumerating"},
  {n:58, ar:"Ù±Ù„Ù’Ù…ÙØ¨Ù’Ø¯ÙØ¦", tr:"Al-MubdiÊ¾", en:"The Originator (of Creation)"},
  {n:59, ar:"Ù±Ù„Ù’Ù…ÙØ¹ÙÙŠØ¯", tr:"Al-MuÊ¿Ä«d", en:"The Restorer / Reproducer"},
  {n:60, ar:"Ù±Ù„Ù’Ù…ÙØ­Ù’ÙŠÙÙŠ", tr:"Al-Muá¸¥yÄ«", en:"The Giver of Life"},
  {n:61, ar:"Ù±Ù„Ù’Ù…ÙÙ…ÙÙŠØª", tr:"Al-MumÄ«t", en:"The Creator of Death"},
  {n:62, ar:"Ù±Ù„Ù’Ø­ÙÙŠÙ‘", tr:"Al-á¸¤ayy", en:"The Ever-Living"},
  {n:63, ar:"Ù±Ù„Ù’Ù‚ÙÙŠÙÙ‘ÙˆÙ…", tr:"Al-QayyÅ«m", en:"The Sustainer / Self-Subsisting"},
  {n:64, ar:"Ù±Ù„Ù’ÙˆÙØ§Ø¬ÙØ¯", tr:"Al-WÄjid", en:"The Perceiver / Finder"},
  {n:65, ar:"Ù±Ù„Ù’Ù…ÙØ§Ø¬ÙØ¯", tr:"Al-MÄjid", en:"The Illustrious / Most Glorious"},
  {n:66, ar:"Ù±Ù„Ù’ÙˆÙØ§Ø­ÙØ¯", tr:"Al-WÄá¸¥id", en:"The One"},
  {n:67, ar:"Ù±Ù„Ù’Ø£ÙØ­ÙØ¯", tr:"Al-Aá¸¥ad", en:"The Indivisible One"},
  {n:68, ar:"Ù±Ù„ØµÙÙ‘Ù…ÙØ¯", tr:"Aá¹£-á¹¢amad", en:"The Self-Sufficient"},
  {n:69, ar:"Ù±Ù„Ù’Ù‚ÙØ§Ø¯ÙØ±", tr:"Al-QÄdir", en:"The All-Able"},
  {n:70, ar:"Ù±Ù„Ù’Ù…ÙÙ‚Ù’ØªÙØ¯ÙØ±", tr:"Al-Muq'tadir", en:"The All-Powerful"},
  {n:71, ar:"Ù±Ù„Ù’Ù…ÙÙ‚ÙØ¯ÙÙ‘Ù…", tr:"Al-Muqaddim", en:"The Expediter"},
  {n:72, ar:"Ù±Ù„Ù’Ù…ÙØ¤ÙØ®ÙÙ‘Ø±", tr:"Al-MuÊ¾akhkhir", en:"The Delayer"},
  {n:73, ar:"Ù±Ù„Ø£ÙÙˆÙÙ‘Ù„", tr:"Al-Awwal", en:"The First"},
  {n:74, ar:"Ù±Ù„Ø¢Ø®ÙØ±", tr:"Al-Ä€khir", en:"The Last"},
  {n:75, ar:"Ù±Ù„Ø¸ÙÙ‘Ø§Ù‡ÙØ±", tr:"Aáº“-áº’Ähir", en:"The Manifest"},
  {n:76, ar:"Ù±Ù„Ù’Ø¨ÙØ§Ø·ÙÙ†", tr:"Al-BÄá¹­in", en:"The Hidden"},
  {n:77, ar:"Ù±Ù„Ù’ÙˆÙØ§Ù„ÙÙŠ / Ù±Ù„Ù’ÙˆÙÙ„ÙÙŠÙ‘", tr:"Al-WÄlÄ« / Al-Waliyy", en:"The Sole Planner / Guardian"},
  {n:78, ar:"Ù±Ù„Ù’Ù…ÙØªÙØ¹ÙØ§Ù„ÙÙŠ", tr:"Al-MutaÊ¿ÄlÄ«", en:"The Self-Exalted"},
  {n:79, ar:"Ù±Ù„Ù’Ø¨ÙØ±Ù‘", tr:"Al-Barr", en:"The Most Kind / Source of All Goodness"},
  {n:80, ar:"Ù±Ù„ØªÙÙ‘ÙˆÙÙ‘Ø§Ø¨", tr:"At-TawwÄb", en:"The Ever-Accepting of Repentance"},
  {n:81, ar:"Ù±Ù„Ù’Ù…ÙÙ†Ù’ØªÙÙ‚ÙÙ…", tr:"Al-Muntaqim", en:"The Avenger (of justice)"},
  {n:82, ar:"Ù±Ù„Ù’Ø¹ÙÙÙÙˆÙ‘", tr:"Al-Ê¿AfÅ«w", en:"The Supreme Pardoner"},
  {n:83, ar:"Ù±Ù„Ø±ÙÙ‘Ø¤ÙÙˆÙ", tr:"Ar-RaÊ¾Å«f", en:"The Most Compassionate"},
  {n:84, ar:"Ù…ÙØ§Ù„ÙÙƒÙ Ù±Ù„Ù’Ù…ÙÙ„Ù’Ùƒ", tr:"MÄlik-ul-Mulk", en:"Master of the Kingdom"},
  {n:85, ar:"Ø°ÙÙˆ Ù±Ù„Ù’Ø¬ÙÙ„ÙØ§Ù„Ù ÙˆÙÙ±Ù„Ù’Ø¥ÙÙƒÙ’Ø±ÙØ§Ù…", tr:"DhÅ«l-JalÄli-wal-IkrÄm", en:"Lord of Glory & Honour"},
  {n:86, ar:"Ù±Ù„Ù’Ù…ÙÙ‚Ù’Ø³ÙØ·", tr:"Al-Muqsit", en:"The Equitable / Just One"},
  {n:87, ar:"Ù±Ù„Ù’Ø¬ÙØ§Ù…ÙØ¹", tr:"Al-JÄmiÊ¿", en:"The Gatherer"},
  {n:88, ar:"Ù±Ù„Ù’ØºÙÙ†ÙÙŠÙ‘", tr:"Al-Ghaniyy", en:"The Self-Sufficient / Independent"},
  {n:89, ar:"Ù±Ù„Ù’Ù…ÙØºÙ’Ù†ÙÙŠ", tr:"Al-MughnÄ«", en:"The Enricher"},
  {n:90, ar:"Ù±Ù„Ù’Ù…ÙØ§Ù†ÙØ¹", tr:"Al-MÄniÊ¿", en:"The Withholder / Preventer"},
  {n:91, ar:"Ù±Ù„Ø¶ÙÙ‘Ø§Ø±Ù‘", tr:"Aá¸-á¸ŒÄrr", en:"The Distresser"},
  {n:92, ar:"Ù±Ù„Ù†ÙÙ‘Ø§ÙÙØ¹", tr:"An-NÄfiÊ¿", en:"The Propitious / Benefactor"},
  {n:93, ar:"Ù±Ù„Ù†ÙÙ‘ÙˆØ±", tr:"An-NÅ«r", en:"The Light"},
  {n:94, ar:"Ù±Ù„Ù’Ù‡ÙØ§Ø¯ÙÙŠ", tr:"Al-HÄdÄ«", en:"The Guide"},
  {n:95, ar:"Ù±Ù„Ù’Ø¨ÙØ¯ÙÙŠØ¹", tr:"Al-BadÄ«Ê¿", en:"The Incomparable Originator"},
  {n:96, ar:"Ù±Ù„Ù’Ø¨ÙØ§Ù‚ÙÙŠ", tr:"Al-BÄqÄ«", en:"The Ever-Abiding"},
  {n:97, ar:"Ù±Ù„Ù’ÙˆÙØ§Ø±ÙØ«", tr:"Al-WÄrith", en:"The Inheritor"},
  {n:98, ar:"Ù±Ù„Ø±ÙÙ‘Ø´ÙÙŠØ¯", tr:"Ar-RashÄ«d", en:"The Guide to the Right Path"},
  {n:99, ar:"Ù±Ù„ØµÙÙ‘Ø¨ÙÙˆØ±", tr:"Aá¹£-á¹¢abÅ«r", en:"The Most Patient"}
];

// -------- DOM render --------
const grid = document.getElementById('grid');
const totalCount = document.getElementById('totalCount');
const visibleCount = document.getElementById('visibleCount');
const q = document.getElementById('q');

totalCount.textContent = NAMES.length;

function makeCard({n, ar, tr, en}){
  const el = document.createElement('article');
  el.className = 'card';
  el.setAttribute('role','listitem');
  el.innerHTML = `
    <div class="meta"><span class="badge">#${n}</span><span class="badge">${tr.length <= 18 ? tr : tr.slice(0,18)+'â€¦'}</span></div>
    <div class="arabic" dir="rtl" lang="ar">${ar}</div>
    <div class="roman">${tr}</div>
    <div class="meaning">${en}</div>
    <div class="btns">
      <button data-say="${ar}" data-lang="ar">ğŸ”Š Arabic</button>
      <button data-say="${tr}" data-lang="en">ğŸ”Š Transliteration</button>
      <button data-say="${en}" data-lang="en">ğŸ”Š Meaning</button>
    </div>
  `;
  return el;
}

function render(list){
  grid.innerHTML = '';
  list.forEach(item=>grid.appendChild(makeCard(item)));
  visibleCount.textContent = list.length;
}
render(NAMES);

// -------- Search --------
q.addEventListener('input', (e)=>{
  const v = e.target.value.trim().toLowerCase();
  if(!v){ render(NAMES); return; }
  const normalized = s => s.normalize('NFKD').toLowerCase();
  const filtered = NAMES.filter(x =>
    x.ar.replace(/[\u064B-\u0652]/g,'').includes(v) ||
    normalized(x.tr).includes(v) ||
    normalized(x.en).includes(v)
  );
  render(filtered);
});

// -------- Speech --------
let queue = [];
let speakingAll = false;

function getVoiceForLang(lang){
  const voices = window.speechSynthesis.getVoices();
  if(lang.startsWith('ar')){
    const ar = voices.find(v => v.lang && v.lang.toLowerCase().startsWith('ar'));
    if(ar) return ar;
  }
  return voices.find(v => v.lang && v.lang.toLowerCase().startsWith('en')) || voices[0] || null;
}

function say(text, lang='en'){
  const u = new SpeechSynthesisUtterance(text);
  u.lang = lang.startsWith('ar') ? 'ar' : 'en-US';
  const voice = getVoiceForLang(u.lang);
  if(voice) u.voice = voice;
  u.rate = 0.95; u.pitch = 1; u.volume = 1;
  window.speechSynthesis.speak(u);
  return u;
}

function stopSpeaking(){
  speakingAll = false;
  window.speechSynthesis.cancel();
  queue = [];
}

// Delegate individual buttons
grid.addEventListener('click', (e)=>{
  const btn = e.target.closest('button[data-say]');
  if(!btn) return;
  const text = btn.getAttribute('data-say');
  const lang = btn.getAttribute('data-lang') || 'en';
  say(text, lang);
});

// Play all (Arabic)
const playAllBtn = document.getElementById('speakAll');
const stopAllBtn = document.getElementById('stopAll');

playAllBtn.addEventListener('click', ()=>{
  stopSpeaking();
  speakingAll = true;
  const current = [...grid.querySelectorAll('.card .arabic')].map(el => el.textContent.trim());
  queue = current;
  const next = () => {
    if(!speakingAll || queue.length === 0) return;
    const phrase = queue.shift();
    const u = say(phrase, 'ar');
    u.onend = () => next();
  };
  next();
});

stopAllBtn.addEventListener('click', stopSpeaking);

// Ensure voices loaded
if (typeof speechSynthesis !== 'undefined'){
  speechSynthesis.onvoiceschanged = ()=>{};
}
</script>
</body>
</html>
